---
title: "Helper functions for METAAB"
output: rmarkdown::html_vignette
link-citations: true
bibliography: METAABref.bib 
vignette: >
  %\VignetteIndexEntry{Helper functions for METAAB}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

# Bind cross-validation objects

```{r, message=FALSE, fig.height = 5, fig.width = 10, fig.align = "center" }
library(METAAB)
library(cowplot)
AMMI0 = cv_ammi(data_ge, ENV, GEN, REP, GY, naxis = 0, nboot = 10, nrepval = 2)
AMMI2 = cv_ammi(data_ge, ENV, GEN, REP, GY, naxis = 2, nboot = 10, nrepval = 2)
AMMI9 = cv_ammi(data_ge, ENV, GEN, REP, GY, naxis = 9, nboot = 10, nrepval = 2)
AMMIF = cv_ammif(data_ge, ENV, GEN, REP, GY, nboot = 10, nrepval = 2)
BLUP = cv_blup(data_ge, ENV, GEN, REP, GY, nboot = 10, nrepval = 2)
bind1 = bind_cv(AMMI0, AMMI2, AMMI9)
bind2 = bind_cv(AMMIF, BLUP)
p1 = plot(bind1)
p2 = plot(bind2)
plot_grid(p1, p2)
    ```

# Split a dataframe into subsets grouped by one or more factors
## Group data and exclude all non-numeric variables
```{r, message=FALSE, fig.height = 5, fig.width = 5.5, fig.align = "center" }
g1 = split_factors(data_ge, ENV)
is.split_factors(g1)

```


## Group data and keep all original variables
```{r, message=FALSE, fig.height = 5, fig.width = 5.5, fig.align = "center" }
g2 = split_factors(data_ge, ENV, GEN, keep_factors = TRUE)
head(g2[[1]])
```

## Group a data frame using all factor variables
```{r, message=FALSE, fig.height = 5, fig.width = 5.5, fig.align = "center" }
g3 = as.split_factors(CO2)
names(g3)
    ```



# Parametric statistics for genotype-vs-environment interaction

```{r, message=FALSE }
  model2 = ge_stats(data_ge2, ENV, GEN, REP, PH)
summary(model2, digits = 3)
    ```

# Make a two-way table based on categorical and numerical arguments

```{r, message=FALSE }
head(data_ge)
matrix = make_mat(data_ge, row = GEN, col = ENV, val = GY)
matrix
    ```

# Generate pairwise combinations of variables by applying one function to each pair
```{r, message=FALSE }
data = data.frame(A = rnorm(n = 5, mean = 10, sd = 3),
                  B = rnorm(n = 5, mean = 120, sd = 30),
                  C = rnorm(n = 5, mean = 40, sd = 10),
                  D = rnorm(n = 5, mean = 1100, sd = 200),
                  E = rnorm(n = 5, mean = 2, sd = 1))
comb_vars(data)
comb_vars(data, FUN = "*", order = "first")
    ```




# Combining data.frames by row, filling missing values

```{r, message=FALSE }
df1 = data.frame(v1 = c(1, 2), v2 = c(2, 3))
df2 = data.frame(v3 = c(4, 5))
rbind_fill(df1, df2)
rbind_fill(df1, df2, fill = "NA")
    ```

# Rescale a continuous vector to have specified minimum and maximum values


```{r, message=FALSE }

resca(1:10)
resca(c(20, 30, 40), new_min = 5, new_max = 10)
resca(c(20, 30, 40), new_min = 0, new_max = 100)
```

